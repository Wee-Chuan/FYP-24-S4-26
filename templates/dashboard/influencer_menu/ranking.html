{% extends "base.html" %}
{% block title %}Network Position{% endblock %}

{% block styles %}
    <link rel="stylesheet" href="{{ url_for('static', filename='components/dashboard/influencer_dashboard.css') }}">
    <style>
        /* Set dimensions for the network graph */
        #networkGraph {
            width: 100%;
            height: 600px;
            border: 1px solid #ccc;
        }
        /* Table styling for better aesthetics */
        .ranking-table table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        .ranking-table th, .ranking-table td {
            border: 1px solid #ccc;
            padding: 10px;
            text-align: center;
        }
        .ranking-table .ellipsis {
            text-align: center;
            font-style: italic;
            color: #666;
        }
        .ranking-table .current-user {
            background-color: #f0f8ff;
            font-weight: bold;
        }
    </style>
{% endblock %}

{% block content %}
    <div class="dashboard-wrapper">
        <aside class="sidebar">
            <h3>Dashboard Menu</h3>
            <ul class="menu">
                <li><a href="{{ url_for('influencer_boundary.engagement_metrics') }}"><i class="fas fa-chart-line"></i> Engagement Metrics</a></li>
                <li><a href="{{ url_for('influencer_boundary.followers') }}"><i class="fas fa-users"></i> Followers Forecast</a></li>
                <li><a href="{{ url_for('influencer_boundary.network') }}"><i class="fas fa-network-wired"></i> Network Visualization</a></li>
                <li><a href="{{ url_for('influencer_boundary.ranking') }}"><i class="fas fa-trophy"></i>Network Position</a></li>

            </ul>
        </aside>

        <main class="main-content">
            <h1>Network Position</h1>
            
            <!-- Insights Section -->
            <section class="insights">
                <h2>Insights</h2>
                <p><strong>Your Rank:</strong> {{ user_rank }}</p>
                <p><strong>Your Score for Degree of Centrality:</strong> {{ user_score }}</p>
                {% if not is_top_user %}
                    <p><strong>Score Difference with Top User:</strong> {{ score_diff }}</p>
                {% endif %}
            </section>

            <!-- Ranking Table -->
            <section class="ranking-table">
                <h2>Ranking Overview</h2>
                <table>
                    <thead>
                        <tr>
                            <th>Rank</th>
                            <th>Username</th>
                            <th>Score</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for row in ranking_table %}
                            {% if row.use_ellipsis %}
                                <tr>
                                    <td colspan="3" class="ellipsis">...</td>
                                </tr>
                            {% else %}
                                <tr class="{{ 'current-user' if row.is_user else '' }}">
                                    <td>{{ row.rank }}</td>
                                    <td>{{ row.username }}</td>
                                    <td>{{ row.score }}</td>
                                </tr>
                            {% endif %}
                        {% endfor %}
                    </tbody>
                </table>
            </section>
        </main>
    </div>
{% endblock %}

